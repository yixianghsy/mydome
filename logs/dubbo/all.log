2020-05-14 02:06:15  INFO ZookeeperMetadataReport:319 -  [DUBBO] start to publish all metadata., dubbo version: 2.7.2, current host: 172.18.0.1
2020-05-14 02:06:15  INFO ZookeeperMetadataReport:239 -  [DUBBO] store provider metadata. Identifier : org.apache.dubbo.metadata.identifier.MetadataIdentifier@5cdee555; definition: FullServiceDefinition{parameters={side=provider, release=2.7.2, methods=getUserById, deprecated=false, dubbo=2.0.2, monitor=dubbo%3A%2F%2F192.168.10.101%3A2181%2Forg.apache.dubbo.registry.RegistryService%3Fapplication%3Duser-app%26dubbo%3D2.0.2%26pid%3D88139%26protocol%3Dregistry%26qos-port%3D22221%26refer%3Dapplication%253Duser-app%2526dubbo%253D2.0.2%2526interface%253Dorg.apache.dubbo.monitor.MonitorService%2526pid%253D88139%2526qos-port%253D22221%2526register.ip%253D172.18.0.1%2526release%253D2.7.2%2526timestamp%253D1589287129741%26registry%3Dzookeeper%26release%3D2.7.2%26timestamp%3D1589287129602, interface=com.xdclass.userapi.service.IUserService, timeout=3000, generic=false, accesslog=dubbo-access.log, retries=0, application=user-app, dynamic=true, qos-port=22221, register=true, bean.name=ServiceBean:com.xdclass.userapi.service.IUserService, anyhost=true}} ServiceDefinition [canonicalName=com.xdclass.userapi.service.IUserService, codeSource=file:/home/hsy/IdeaProjects/xdclass-user/user-service-api/target/classes/, methods=[MethodDefinition [name=getUserById, parameterTypes=[int], returnType=com.xdclass.userapi.VO.UserVO]]], dubbo version: 2.7.2, current host: 172.18.0.1
2020-05-14 15:48:08  INFO AbstractRegistryFactory:68 -  [DUBBO] Close all registries [zookeeper://192.168.10.101:2181/org.apache.dubbo.registry.RegistryService?application=user-app&dubbo=2.0.2&interface=org.apache.dubbo.registry.RegistryService&pid=88139&qos-port=22221&release=2.7.2&timestamp=1589287129602], dubbo version: 2.7.2, current host: 172.18.0.1
2020-05-14 15:48:08  INFO ZookeeperRegistry:458 -  [DUBBO] Destroy registry:zookeeper://192.168.10.101:2181/org.apache.dubbo.registry.RegistryService?application=user-app&dubbo=2.0.2&interface=org.apache.dubbo.registry.RegistryService&pid=88139&qos-port=22221&release=2.7.2&timestamp=1589287129602, dubbo version: 2.7.2, current host: 172.18.0.1
2020-05-14 15:48:08  INFO ZookeeperRegistry:291 -  [DUBBO] Unregister: dubbo://192.168.10.156:20883/com.xdclass.userapi.service.IUserService?accesslog=dubbo-access.log&anyhost=true&application=user-app&bean.name=ServiceBean:com.xdclass.userapi.service.IUserService&deprecated=false&dubbo=2.0.2&dynamic=true&generic=false&interface=com.xdclass.userapi.service.IUserService&methods=getUserById&pid=88139&register=true&release=2.7.2&retries=0&side=provider&timeout=3000&timestamp=1589287129607, dubbo version: 2.7.2, current host: 172.18.0.1
2020-05-14 15:48:08  INFO ZookeeperRegistry:467 -  [DUBBO] Destroy unregister url dubbo://192.168.10.156:20883/com.xdclass.userapi.service.IUserService?accesslog=dubbo-access.log&anyhost=true&application=user-app&bean.name=ServiceBean:com.xdclass.userapi.service.IUserService&deprecated=false&dubbo=2.0.2&dynamic=true&generic=false&interface=com.xdclass.userapi.service.IUserService&methods=getUserById&pid=88139&register=true&release=2.7.2&retries=0&side=provider&timeout=3000&timestamp=1589287129607, dubbo version: 2.7.2, current host: 172.18.0.1
2020-05-14 15:48:08  INFO ZookeeperRegistry:320 -  [DUBBO] Unsubscribe: provider://192.168.10.156:20883/com.xdclass.userapi.service.IUserService?accesslog=dubbo-access.log&anyhost=true&application=user-app&bean.name=ServiceBean:com.xdclass.userapi.service.IUserService&bind.ip=192.168.10.156&bind.port=20883&category=configurators&check=false&deprecated=false&dubbo=2.0.2&dynamic=true&generic=false&interface=com.xdclass.userapi.service.IUserService&methods=getUserById&monitor=dubbo%3A%2F%2F192.168.10.101%3A2181%2Forg.apache.dubbo.registry.RegistryService%3Fapplication%3Duser-app%26dubbo%3D2.0.2%26pid%3D88139%26protocol%3Dregistry%26qos-port%3D22221%26refer%3Dapplication%253Duser-app%2526dubbo%253D2.0.2%2526interface%253Dorg.apache.dubbo.monitor.MonitorService%2526pid%253D88139%2526qos-port%253D22221%2526register.ip%253D172.18.0.1%2526release%253D2.7.2%2526timestamp%253D1589287129741%26registry%3Dzookeeper%26release%3D2.7.2%26timestamp%3D1589287129602&pid=88139&qos-port=22221&register=true&release=2.7.2&retries=0&side=provider&timeout=3000&timestamp=1589287129607, dubbo version: 2.7.2, current host: 172.18.0.1
2020-05-14 15:48:08  INFO ZookeeperRegistry:483 -  [DUBBO] Destroy unsubscribe url provider://192.168.10.156:20883/com.xdclass.userapi.service.IUserService?accesslog=dubbo-access.log&anyhost=true&application=user-app&bean.name=ServiceBean:com.xdclass.userapi.service.IUserService&bind.ip=192.168.10.156&bind.port=20883&category=configurators&check=false&deprecated=false&dubbo=2.0.2&dynamic=true&generic=false&interface=com.xdclass.userapi.service.IUserService&methods=getUserById&monitor=dubbo%3A%2F%2F192.168.10.101%3A2181%2Forg.apache.dubbo.registry.RegistryService%3Fapplication%3Duser-app%26dubbo%3D2.0.2%26pid%3D88139%26protocol%3Dregistry%26qos-port%3D22221%26refer%3Dapplication%253Duser-app%2526dubbo%253D2.0.2%2526interface%253Dorg.apache.dubbo.monitor.MonitorService%2526pid%253D88139%2526qos-port%253D22221%2526register.ip%253D172.18.0.1%2526release%253D2.7.2%2526timestamp%253D1589287129741%26registry%3Dzookeeper%26release%3D2.7.2%26timestamp%3D1589287129602&pid=88139&qos-port=22221&register=true&release=2.7.2&retries=0&side=provider&timeout=3000&timestamp=1589287129607, dubbo version: 2.7.2, current host: 172.18.0.1
2020-05-14 15:48:08  INFO DubboProtocol:616 -  [DUBBO] Close dubbo server: /192.168.10.156:20883, dubbo version: 2.7.2, current host: 172.18.0.1
2020-05-14 15:48:08  WARN AbstractServer:213 -  [DUBBO] All clients has disconnected from 0.0.0.0/0.0.0.0:20883. You can graceful shutdown now., dubbo version: 2.7.2, current host: 172.18.0.1
2020-05-14 15:48:08  WARN HeaderExchangeServer:141 -  [DUBBO] send cannot write message error., dubbo version: 2.7.2, current host: 172.18.0.1
org.apache.dubbo.remoting.RemotingException: Failed to send message Request [id=0, version=2.0.2, twoway=false, event=true, broken=false, data=R] to /192.168.10.156:41662, cause: null
	at org.apache.dubbo.remoting.transport.netty4.NettyChannel.send(NettyChannel.java:113)
	at org.apache.dubbo.remoting.exchange.support.header.HeaderExchangeChannel.send(HeaderExchangeChannel.java:91)
	at org.apache.dubbo.remoting.exchange.support.header.HeaderExchangeServer.sendChannelReadOnlyEvent(HeaderExchangeServer.java:138)
	at org.apache.dubbo.remoting.exchange.support.header.HeaderExchangeServer.close(HeaderExchangeServer.java:108)
	at org.apache.dubbo.rpc.protocol.dubbo.DubboProtocol.destroy(DubboProtocol.java:619)
	at org.apache.dubbo.qos.protocol.QosProtocolWrapper.destroy(QosProtocolWrapper.java:77)
	at org.apache.dubbo.rpc.protocol.ProtocolFilterWrapper.destroy(ProtocolFilterWrapper.java:135)
	at org.apache.dubbo.rpc.protocol.ProtocolListenerWrapper.destroy(ProtocolListenerWrapper.java:79)
	at org.apache.dubbo.config.DubboShutdownHook.destroyProtocols(DubboShutdownHook.java:103)
	at org.apache.dubbo.config.DubboShutdownHook.doDestroy(DubboShutdownHook.java:91)
	at org.apache.dubbo.config.spring.extension.SpringExtensionFactory$ShutdownHookListener.onApplicationEvent(SpringExtensionFactory.java:114)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:172)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:165)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:139)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:402)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:359)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1009)
	at org.springframework.context.support.AbstractApplicationContext$1.run(AbstractApplicationContext.java:945)
Caused by: io.netty.channel.ExtendedClosedChannelException
	at io.netty.channel.AbstractChannel$AbstractUnsafe.write(...)(Unknown Source)
2020-05-14 15:48:08  INFO AbstractServer:153 -  [DUBBO] Close NettyServer bind /0.0.0.0:20883, export /192.168.10.156:20883, dubbo version: 2.7.2, current host: 172.18.0.1
2020-05-14 15:48:08  INFO DubboProtocol:79 -  [DUBBO] Unexport service: dubbo://192.168.10.156:20883/com.xdclass.userapi.service.IUserService?accesslog=dubbo-access.log&anyhost=true&application=user-app&bean.name=ServiceBean:com.xdclass.userapi.service.IUserService&bind.ip=192.168.10.156&bind.port=20883&deprecated=false&dubbo=2.0.2&dynamic=true&generic=false&interface=com.xdclass.userapi.service.IUserService&methods=getUserById&monitor=dubbo%3A%2F%2F192.168.10.101%3A2181%2Forg.apache.dubbo.registry.RegistryService%3Fapplication%3Duser-app%26dubbo%3D2.0.2%26pid%3D88139%26protocol%3Dregistry%26qos-port%3D22221%26refer%3Dapplication%253Duser-app%2526dubbo%253D2.0.2%2526interface%253Dorg.apache.dubbo.monitor.MonitorService%2526pid%253D88139%2526qos-port%253D22221%2526register.ip%253D172.18.0.1%2526release%253D2.7.2%2526timestamp%253D1589287129741%26registry%3Dzookeeper%26release%3D2.7.2%26timestamp%3D1589287129602&pid=88139&qos-port=22221&register=true&release=2.7.2&retries=0&side=provider&timeout=3000&timestamp=1589287129607, dubbo version: 2.7.2, current host: 172.18.0.1
2020-05-14 15:48:08  INFO Server:112 -  [DUBBO] qos-server stopped., dubbo version: 2.7.2, current host: 172.18.0.1
2020-05-14 15:48:08  INFO InjvmProtocol:79 -  [DUBBO] Unexport service: injvm://127.0.0.1/com.xdclass.userapi.service.IUserService?accesslog=dubbo-access.log&anyhost=true&application=user-app&bean.name=ServiceBean:com.xdclass.userapi.service.IUserService&bind.ip=192.168.10.156&bind.port=20883&deprecated=false&dubbo=2.0.2&dynamic=true&generic=false&interface=com.xdclass.userapi.service.IUserService&methods=getUserById&pid=88139&qos-port=22221&register=true&release=2.7.2&retries=0&side=provider&timeout=3000&timestamp=1589287129607, dubbo version: 2.7.2, current host: 172.18.0.1
2020-05-14 15:48:08  INFO ZookeeperRegistry:212 -  [DUBBO] Load registry cache file /home/hsy/.dubbo/dubbo-registry-user-app-192.168.10.101:2181.cache, data: {com.xdclass.userapi.service.IUserService=empty://192.168.10.156:20883/com.xdclass.userapi.service.IUserService?accesslog=dubbo-access.log&anyhost=true&application=user-app&bean.name=ServiceBean:com.xdclass.userapi.service.IUserService&bind.ip=192.168.10.156&bind.port=20883&category=configurators&check=false&deprecated=false&dubbo=2.0.2&dynamic=true&generic=false&interface=com.xdclass.userapi.service.IUserService&methods=getUserById&monitor=dubbo%3A%2F%2F192.168.10.101%3A2181%2Forg.apache.dubbo.registry.RegistryService%3Fapplication%3Duser-app%26dubbo%3D2.0.2%26pid%3D88139%26protocol%3Dregistry%26qos-port%3D22221%26refer%3Dapplication%253Duser-app%2526dubbo%253D2.0.2%2526interface%253Dorg.apache.dubbo.monitor.MonitorService%2526pid%253D88139%2526qos-port%253D22221%2526register.ip%253D172.18.0.1%2526release%253D2.7.2%2526timestamp%253D1589287129741%26registry%3Dzookeeper%26release%3D2.7.2%26timestamp%3D1589287129602&pid=88139&qos-port=22221&register=true&release=2.7.2&retries=0&side=provider&timeout=3000&timestamp=1589287129607}, dubbo version: 2.7.2, current host: 172.18.0.1
2020-05-14 15:48:08  INFO ZookeeperTransporter:69 -  [DUBBO] No valid zookeeper client found from cache, therefore create a new client for url. zookeeper://192.168.10.101:2181/org.apache.dubbo.registry.RegistryService?application=user-app&dubbo=2.0.2&interface=org.apache.dubbo.registry.RegistryService&pid=88139&qos-port=22221&release=2.7.2&timestamp=1589287129602, dubbo version: 2.7.2, current host: 172.18.0.1
2020-05-14 15:48:08  INFO ZookeeperRegistry:291 -  [DUBBO] Unregister: dubbo://192.168.10.156:20883/com.xdclass.userapi.service.IUserService?accesslog=dubbo-access.log&anyhost=true&application=user-app&bean.name=ServiceBean:com.xdclass.userapi.service.IUserService&deprecated=false&dubbo=2.0.2&dynamic=true&generic=false&interface=com.xdclass.userapi.service.IUserService&methods=getUserById&pid=88139&register=true&release=2.7.2&retries=0&side=provider&timeout=3000&timestamp=1589287129607, dubbo version: 2.7.2, current host: 172.18.0.1
2020-05-14 15:48:08  INFO ZookeeperRegistry:320 -  [DUBBO] Unsubscribe: provider://192.168.10.156:20883/com.xdclass.userapi.service.IUserService?accesslog=dubbo-access.log&anyhost=true&application=user-app&bean.name=ServiceBean:com.xdclass.userapi.service.IUserService&bind.ip=192.168.10.156&bind.port=20883&category=configurators&check=false&deprecated=false&dubbo=2.0.2&dynamic=true&generic=false&interface=com.xdclass.userapi.service.IUserService&methods=getUserById&monitor=dubbo%3A%2F%2F192.168.10.101%3A2181%2Forg.apache.dubbo.registry.RegistryService%3Fapplication%3Duser-app%26dubbo%3D2.0.2%26pid%3D88139%26protocol%3Dregistry%26qos-port%3D22221%26refer%3Dapplication%253Duser-app%2526dubbo%253D2.0.2%2526interface%253Dorg.apache.dubbo.monitor.MonitorService%2526pid%253D88139%2526qos-port%253D22221%2526register.ip%253D172.18.0.1%2526release%253D2.7.2%2526timestamp%253D1589287129741%26registry%3Dzookeeper%26release%3D2.7.2%26timestamp%3D1589287129602&pid=88139&qos-port=22221&register=true&release=2.7.2&retries=0&side=provider&timeout=3000&timestamp=1589287129607, dubbo version: 2.7.2, current host: 172.18.0.1
2020-05-14 15:48:08  INFO RegistryProtocol:689 -  [DUBBO] Waiting 10000ms for registry to notify all consumers before unexport. Usually, this is called when you use dubbo API, dubbo version: 2.7.2, current host: 172.18.0.1
